@page "/"
@inject IService<PoolDto, PoolCreateDto, PoolUpdateDto> PoolService
@inject HttpClient Http
@inject NavigationManager NavigationManager
@inject AuthService _authService
@inject FasService FasService

<PageTitle>Home</PageTitle>

<link href="~/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<script>
    function ShowVisit(id) {
        window.location.href = "/visits/" + id;
    }
</script>

<div class="row mt-5 justify-content-between">
    <div class="col-12 col-md-6 shadow-sm mx-5">
        <h2>Pool list</h2>

        <table class="table table-hover">
            <thead>
                <tr>

                    <th>Pool number</th>
                    <th>Size</th>
                    <th>Temperature</th>
                    <th>Total capacity</th>

                </tr>
            </thead>
            <tbody>
                @foreach (var pool in PoolService.ItemList)
                {
                    <tr>
                        <td>@pool.Id</td>
                        <td>@pool.Size.Title</td>
                        <td>@pool.Temperature</td>
                        <td>@pool.TotalCapacity</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="col-12 col-md-4 shadow-sm mx-5">
        <h2>Weather report</h2>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>
                    <td>Date</td>
                    <td>Temperature</td>
                    <td>Summary</td>
                    </th>
                </tr>
            </thead>
        </table>
    </div>
</div>
<div class="row mt-5 d-flex justify-content-end">
    <div class="col-12 col-md-4 shadow-sm mx-5 ">
        <h2>Useful exercises</h2>

    </div>
</div>

@code {
    
    protected override async Task OnInitializedAsync()
    {
        await _authService.CheckAndRemoveExpiredToken();
        await PoolService.GetAllAsync();
    }

   
}